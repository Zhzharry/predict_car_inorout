# 模型优化说明（简化高效版）

## 优化目标
提高模型准确率，忽略不必要的指标，保证训练的有效性和效率

## 主要改进内容（超精细版）

### 1. SMOTE过采样优化（超精细版）
**改进前：** 少数类只过采样到最大类的80%
**改进后：** 少数类过采样到最大类的120%（超采样）
- **影响：** 更好地平衡类别分布，减少模型对多数类的偏向，让模型有更多少数类样本学习
- **代价：** 训练时间增加约2-3倍，但可以显著提高少数类的识别准确率

### 2. SVD降维策略优化
**改进前：** 保留99%的累计贡献率
**改进后：** 降低到95%的累计贡献率
- **影响：** 去除更多噪声成分，提高模型泛化能力
- **代价：** 可能丢失少量有用信息，但有助于减少过拟合

### 3. QR特征筛选优化（简化版）
**改进前：** 保留90%的特征
**改进后：** 固定保留75%最重要的特征
- **影响：** 去除冗余特征，减少噪声干扰，提高模型准确性
- **代价：** 训练时间几乎不增加，直接使用固定比例保证效率

### 4. LDA判别向量数量增加（超精细版）
**改进前：** 使用2个判别向量
**改进后：** 增加到4个判别向量
- **影响：** 能够捕捉更复杂的类别边界，提高分类准确性
- **代价：** 模型参数增加，但仍在可接受范围内

### 5. 分类阈值优化（简化版）
**改进前：** 简单的固定阈值（少数类0.3，多数类0.5）
**改进后：** 使用全数据集 + 中等密度网格搜索（步长0.05）找到每个类别的最优阈值
- **影响：** 针对每个类别找到最佳决策边界，使用F1分数作为评估指标（更平衡），显著提高分类准确率
- **代价：** 训练时间增加约2-3倍（全数据集搜索，无需交叉验证），平衡效率和效果

### 6. 后验概率计算优化
**改进前：** 基础的多变量高斯模型
**改进后：** 使用更稳定的数值计算方法（伪逆、数值裁剪等）
- **影响：** 提高数值稳定性，避免溢出和下溢问题
- **代价：** 计算略有增加，但提高了可靠性

### 7. 预测策略优化
**改进前：** 简单的阈值判断
**改进后：** 智能阈值应用，考虑概率差距
- **影响：** 在阈值不满足时，如果某个类别概率明显高于其他，仍然选择该类别
- **代价：** 计算逻辑稍复杂，但提高了预测准确性

### 8. 时序平滑优化
**改进前：** 窗口大小5
**改进后：** 窗口大小7
- **影响：** 更平滑的预测结果，减少抖动
- **代价：** 需要更多历史数据，但提高了稳定性

### 9. 移除集成预测（简化）
**原因：** 集成预测虽然可能提高准确率，但会增加预测时间5倍，效果不明显
**改进：** 移除集成预测，使用单次预测，保证预测效率

## 预期效果（简化高效版）

### 准确率提升
- **总体准确率：** 预期从89.88%提升到93-95%
- **类别1（进入地库）召回率：** 预期从75.26%提升到82%+
- **类别1（进入地库）精确率：** 预期从28.40%提升到35%+
- **类别2（出地库）精确率：** 预期从44.10%提升到55%+

### 性能指标变化
- **训练时间：** 增加约3-5倍（由于SMOTE过采样、阈值优化，但移除了交叉验证）
- **预测时延：** 基本不变（移除了集成预测）
- **计算效率：** 基本不变（移除了集成预测）
- **模型大小：** 略有增加（由于判别向量数量增加到4个）

## 使用说明

1. 运行 `b_模型训练代码.py` 重新训练模型
2. 运行 `c_模型调用以及结果分析代码.py` 进行预测
3. 运行 `e_指标计算输出报告代码.py` 查看新的评估报告

## 进一步优化建议

如果准确率仍不满足要求，可以考虑：
1. 增加集成预测次数（从5次增加到10次）
2. 尝试不同的SVD保留率（如92-98%之间）
3. 增加LDA判别向量数量（如5-6个）
4. 使用更复杂的过采样策略（如ADASYN、BorderlineSMOTE）
5. 添加特征工程（如特征交互、多项式特征等）
6. 实现多模型集成（训练多个不同配置的模型并投票）
7. 使用更复杂的后处理策略（如条件随机场CRF）

## 训练时间说明

当前优化版本预计训练时间：
- **基础版本：** 约5-10分钟
- **简化高效版本：** 约20-40分钟（3-5倍）

主要时间消耗：
1. SMOTE过采样：约5-10分钟
2. 阈值优化（全数据集）：约5-10分钟
3. LDA训练：约5-10分钟
4. 其他：约5-10分钟

**优化说明：** 移除了交叉验证特征选择和交叉验证阈值优化，使用固定比例和全数据集搜索，在保证效果的同时大幅提升训练效率。

